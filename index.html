<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>SPA SDK Sample</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script> <!--adding jquery scripting-->
    <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/sprinkle.js"></script>
    <script>
      $('#getIdTokenClaims').click(async () => {
        const claims = await auth0.getIdTokenClaims();
        // if you need the raw id_token, you can access it
        // using the __raw property
        const id_token = claims.__raw;
      });
    </script>
  </head>
  <body>
    <h2>SPA Authentication Sample</h2>

    <p>Welcome to our page!</p>
    <button id="btn-login" disabled="true" onclick="login()">Log in</button>
    <button id="btn-logout" disabled="true" onclick="logout()">Log out</button>
    <div class="hidden" id="gated-content">
      <p>
        You're seeing this content because you're currently
        <strong>logged in</strong>.
      </p>
      <label>
        Access token:
        <pre id="ipt-access-token"></pre>
      </label>
      <label>
        User profile:
        <pre id="ipt-user-profile"></pre>
      </label>

      <script>
        // const ws = new WebSocket("ws://localhost:8082");
        // ws.addEventListener("open", e => {
        //   ws.send(JSON.stringify({
        //     x: 254,
        //     y:100
        //   }));
        // });

        // const WebSocket = require("ws"); 
        // const wss = new WebSocket.Server({ port: 8082 });

        ws.on("connection", wss => {
            wss.on("message", message => {
                console.log(JSON.parse(message)); //de encodes hex 
                console.log("sent from server to html");

        });
        /// attempting to render data
        document.getElementById("ipt-user-rules").textContent = JSON.stringify(
                  hello
                );
            });
      </script>
            <label>
              Rules:
              <pre id="ipt-user-rules"></pre>
            </label>
    </div>
      <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
      <script src="js/app.js"></script>
  </body>
</html>